# ============================================================================
# Environment Configuration
# ============================================================================
# Set the environment state: dev, prod, or test
# This determines which prefixed variables are loaded
ENV_STATE=dev

# ============================================================================
# Global Configuration (No Prefix)
# ============================================================================
# Server domain name
DOMAIN=localhost

# CORS origins (comma-separated list)
# Example: http://localhost,http://localhost:5173,https://yourdomain.com
BACKEND_CORS_ORIGINS=http://localhost,http://localhost:5173

# ============================================================================
# Development Environment (DEV_ prefix)
# ============================================================================

# Database Configuration
# Priority: SUPABASE_DB_URL > DATABASE_URL > PostgreSQL components > SQLite fallback

# Supabase (Recommended for Production, Optional for Development)
# Option 1: Use direct database connection string (recommended)
# Get from: Project Settings > Database > Connection string
# Format: postgresql://postgres:[YOUR-PASSWORD]@[PROJECT-REF].supabase.co:5432/postgres
DEV_SUPABASE_DB_URL=postgresql://postgres:your_password@xxx.supabase.co:5432/postgres

# Option 2: Auto-construct from project URL + database password
# The app will automatically build the connection string from these
# Uncomment and use if you prefer not to use the direct connection string
# DEV_SUPABASE_URL=https://xxx.supabase.co
# DEV_SUPABASE_DB_PASSWORD=your_database_password_here

# Supabase API key (for Supabase client SDK, different from DB password)
# Get from: Project Settings > API
DEV_SUPABASE_URL=https://xxx.supabase.co
DEV_SUPABASE_KEY=your_supabase_anon_or_service_role_key

# PostgreSQL (Alternative to Supabase)
# If not provided, the app will use SQLite (dev.db) in development
DEV_POSTGRESQL_USERNAME=admin
DEV_POSTGRESQL_PASSWORD=your_password_here
DEV_POSTGRESQL_SERVER=localhost
DEV_POSTGRESQL_PORT=5432
DEV_POSTGRESQL_DATABASE=quiz_db

# Generic Database URL (Alternative)
# DEV_DATABASE_URL=postgresql+asyncpg://user:password@host:port/database

# JWT Authentication
# IMPORTANT: Change DEV_JWT_SECRET_KEY to a secure random string in production
DEV_JWT_SECRET_KEY=dev-key-change-in-production
DEV_JWT_ALGORITHM=HS256
DEV_ACCESS_TOKEN_EXPIRE_MINUTES=20
DEV_CONFIRM_TOKEN_EXPIRE_MINUTES=60

# Email Service (Mailgun)
# Get your API key from https://app.mailgun.com/
DEV_MAILGUN_API_KEY=your_mailgun_api_key_here
DEV_MAILGUN_DOMAIN=your_mailgun_domain_here.mailgun.org

# Cloud Storage (Backblaze B2)
# Get your credentials from https://www.backblaze.com/b2/docs/
DEV_B2_KEY_ID=your_b2_key_id_here
DEV_B2_APPLICATION_KEY=your_b2_application_key_here
DEV_B2_BUCKET_NAME=your_bucket_name_here

# Logging (Logtail)
# Optional: Get your API key from https://betterstack.com/
DEV_LOGTAIL_API_KEY=your_logtail_api_key_here

# ============================================================================
# Test Environment (TEST_ prefix)
# ============================================================================
# Test environment uses SQLite by default (test.db)
# Override these if you need PostgreSQL or Supabase for testing
# TEST_SUPABASE_DB_URL=postgresql://postgres:password@xxx.supabase.co:5432/postgres
# TEST_SUPABASE_URL=https://xxx.supabase.co
# TEST_SUPABASE_KEY=your_test_supabase_key
# TEST_POSTGRESQL_USERNAME=
# TEST_POSTGRESQL_PASSWORD=
# TEST_POSTGRESQL_SERVER=
# TEST_POSTGRESQL_PORT=
# TEST_POSTGRESQL_DATABASE=
# TEST_JWT_SECRET_KEY=test-secret-key
# TEST_JWT_ALGORITHM=HS256
# TEST_ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# Production Environment (PROD_ prefix)
# ============================================================================
# Production environment variables should be set securely
# NEVER commit production secrets to version control
# Use environment variables or a secrets management service

# Supabase (Recommended for Production)
# Option 1: Use direct database connection string (recommended)
# Get your production connection string from Supabase dashboard
PROD_SUPABASE_DB_URL=postgresql://postgres:your_prod_password@xxx.supabase.co:5432/postgres

# Option 2: Auto-construct from project URL + database password
# PROD_SUPABASE_URL=https://xxx.supabase.co
# PROD_SUPABASE_DB_PASSWORD=your_prod_database_password_here

# Supabase API key (for Supabase client SDK)
PROD_SUPABASE_URL=https://xxx.supabase.co
PROD_SUPABASE_KEY=your_prod_supabase_service_role_key

# PostgreSQL (Alternative to Supabase)
# PROD_POSTGRESQL_USERNAME=your_prod_db_username
# PROD_POSTGRESQL_PASSWORD=your_prod_db_password
# PROD_POSTGRESQL_SERVER=your_prod_db_host
# PROD_POSTGRESQL_PORT=5432
# PROD_POSTGRESQL_DATABASE=your_prod_db_name

# Generic Database URL (Alternative)
# PROD_DATABASE_URL=postgresql+asyncpg://user:password@host:port/database

# JWT Authentication
PROD_JWT_SECRET_KEY=your_secure_random_secret_key_here
PROD_JWT_ALGORITHM=HS256
PROD_ACCESS_TOKEN_EXPIRE_MINUTES=30
PROD_MAILGUN_API_KEY=your_prod_mailgun_api_key
PROD_MAILGUN_DOMAIN=your_prod_mailgun_domain.mailgun.org
PROD_B2_KEY_ID=your_prod_b2_key_id
PROD_B2_APPLICATION_KEY=your_prod_b2_application_key
PROD_B2_BUCKET_NAME=your_prod_bucket_name
PROD_LOGTAIL_API_KEY=your_prod_logtail_api_key

# ============================================================================
# Docker Services (Optional)
# ============================================================================
# pgAdmin configuration
PGADMIN_DEFAULT_EMAIL=admin@example.com

# ============================================================================
# Notes
# ============================================================================
# Database Connection Priority:
# 1. SUPABASE_DB_URL (highest priority)
# 2. DATABASE_URL
# 3. Individual PostgreSQL components (POSTGRESQL_*)
# 4. SQLite fallback (development only)
#
# For Supabase:
# - Get connection string from: Project Settings > Database > Connection string
# - Use "Direct connection" or "Connection pooling" mode
# - SSL is automatically configured
# - Connection pooling is optimized for Supabase limits
